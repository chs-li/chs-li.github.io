# RAG（檢索增強生成）專案總覽

實作多種 RAG 流派包含標準 RAG、查詢擴展與類 GraphRAG，應用於知識庫問答、角色對話與長上下文場景。重點為幻覺抑制、多跳推理與精準檢索，並建立可調式的混合檢索管線。

## 主要亮點
- **混合檢索**：結合稀疏與向量檢索，並可加入重排序模型提升結果品質。
- **查詢擴展**：透過模型生成擴展查詢，提高召回並降低幻覺風險。
- **多索引管理**：支援多組索引的建立、更新與持久化，便於跨場景使用。
- **雙 RAG 對話**：背景知識與歷史對話分開檢索，提升角色對話一致性與多語適配。

## 內容概覽
### 混合檢索系統（API / CLI / 程式內）
- 提供查詢、索引初始化與健康狀態檢查等介面，可依需求調整檢索相關參數。
- 支援多索引的列舉、載入與更新，並能以增量或重建方式維護語料。
- 索引可序列化至本地儲存，以便快速啟動或跨環境部署。

### 核心組件
- 稀疏與密集檢索並行，並可透過重排序模型整合結果。
- 支援查詢擴展、多路查詢與自訂的融合策略。
- 提供互動式與批次查詢介面，可在本地或外部向量庫環境執行。

### 對話場景案例（雙記憶）
- 將背景資料與歷史對話分別檢索後整合進提示詞，提高回覆一致性。
- 角色可有獨立的索引與提示模板，支援多角色或多語環境。
- 具語言與主題判斷，避免檢索錯置或誤答。

### 原型與研究
- 混合檢索策略、查詢擴展、權重調整與多階段管線。
- 含近似 GraphRAG 與 Hybrid 策略的原型實驗，用於探索長文檢索品質。

## 使用與部署建議
- **API 服務模式**：啟動服務後載入索引，即可透過 REST 進行查詢或監控狀態。
- **系統嵌入模式**：於程式內建立 RAG 實例，設定檢索權重、重排序參數與連接的向量庫。
- **對話應用**：採取背景與歷史雙檢索，加上角色提示與狀態管理，保持長對話穩定度。
- **調參建議**：依語料類型調整稀疏/向量比重與 chunk 策略；在低召回場景加入查詢擴展能提升覆蓋率。

